<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EngTrain App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="header">
    <h1>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ EngTrain App!</h1>
  </div>

  <div class="content">
    <h2>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:</h2>

    <button class="btn" onclick="navigateTo('grammar.html')">üìö Grammar</button>
    <button class="btn" onclick="navigateTo('vocabulary.html')">üß† Vocabulary</button>
    <button class="btn" onclick="navigateTo('practice.html')">‚úçÔ∏è Practice</button>
    <button class="btn" onclick="navigateTo('games.html')">üéÆ –ò–≥—Ä—ã</button>
    <button class="btn secondary" onclick="navigateTo('full-version.html')">üîê –ß—Ç–æ –≤ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏?</button>
    <button class="btn" onclick="navigateTo('test.html')" style="background-color: #28a745;">üß™ –¢–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</button>
    <button class="btn" onclick="testNavigation()" style="background-color: #ff6b6b;">üîß –¢–µ—Å—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ</button>
    <button class="btn" onclick="testDirectNavigation()" style="background-color: #ffa500;">üöÄ –ü—Ä—è–º–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è</button>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
    if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();
      console.log('Telegram Web App initialized');
    }

    function navigateTo(page) {
      console.log('=== NAVIGATION DEBUG ===');
      console.log('Navigating to:', page);
      console.log('Current URL:', window.location.href);
      console.log('Current pathname:', window.location.pathname);
      
      try {
        // –ü–æ–ø—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        console.log('Attempting navigation...');
        
        // –°–ø–æ—Å–æ–± 1: –ü—Ä–æ—Å—Ç–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
        console.log('Method 1: window.location.href');
        window.location.href = page;
        
        // –ï—Å–ª–∏ –¥–æ—à–ª–∏ —Å—é–¥–∞, –∑–Ω–∞—á–∏—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞
        console.log('Navigation failed, trying alternative method...');
        
        // –°–ø–æ—Å–æ–± 2: –û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
        console.log('Method 2: window.open');
        window.open(page, '_self');
        
      } catch (error) {
        console.error('Navigation error:', error);
        
        // –°–ø–æ—Å–æ–± 3: –ü–æ–ø—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ Telegram Web App API
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
          console.log('Method 3: Telegram Web App API');
          try {
            Telegram.WebApp.openLink(window.location.origin + '/' + page);
          } catch (telegramError) {
            console.error('Telegram API error:', telegramError);
          }
        }
      }
    }
    
    function testNavigation() {
      console.log('Testing navigation...');
      alert('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏...\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–∂–∞—Ç—å –Ω–∞ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É –≤—ã—à–µ.');
    }
    
    function testDirectNavigation() {
      console.log('=== DIRECT NAVIGATION TEST ===');
      console.log('Testing direct navigation to grammar.html');
      
      // –ü–æ–ø—Ä–æ–±—É–µ–º –ø—Ä—è–º—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é
      try {
        console.log('Direct navigation attempt...');
        window.location.href = 'grammar.html';
      } catch (error) {
        console.error('Direct navigation failed:', error);
        alert('–ü—Ä—è–º–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞. –û—à–∏–±–∫–∞: ' + error.message);
      }
    }
  </script>
</body>
</html>
